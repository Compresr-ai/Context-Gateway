# Codex Agent Configuration
# ==========================
# OpenAI Codex CLI with gateway compression
# Supports both API key and ChatGPT subscription authentication.
#
# Auth is auto-detected based on the token:
#   - API Key (sk-xxx): routes to api.openai.com
#   - Subscription token: routes to chatgpt.com/backend-api

agent:
  name: "codex"
  display_name: "Codex (CLI)"
  description: "OpenAI Codex CLI with Compresr compression"
  config: "default_config.yaml"

  environment:
    - name: "OPENAI_BASE_URL"
      value: "http://localhost:${GATEWAY_PORT}"
    # Note: OPENAI_PROVIDER_URL is auto-detected based on auth token type
    # No need to set it explicitly - gateway handles routing automatically

  command:
    check_cmd: ["which", "codex"]
    run: "codex"
    args: []
    install_cmd: ["npm", "install", "-g", "@openai/codex"]
    fallback_message: "Codex CLI not found. Install with: npm install -g @openai/codex"

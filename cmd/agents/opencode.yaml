# OpenCode Agent Configuration
# ============================
# OpenCode AI coding assistant with gateway compression
# Uses default_config.yaml with dual-model support:
#   - Lingua: Semantic summarization
#   - Compresr: Tool output & discovery
# https://github.com/opencode-ai/opencode

agent:
  name: "opencode"
  display_name: "OpenCode"
  description: "Open-source AI coding assistant with Compresr compression"
  config: "default_config.yaml"

  environment:
    - name: "ANTHROPIC_BASE_URL"
      value: "http://localhost:${GATEWAY_PORT}"
    - name: "ANTHROPIC_API_KEY"
      value: "${ANTHROPIC_API_KEY}"
    - name: "OPENAI_BASE_URL"
      value: "http://localhost:${GATEWAY_PORT}/v1"
    - name: "OPENAI_API_KEY"
      value: "${OPENAI_API_KEY}"

  command:
    check_cmd: ["which", "opencode"]
    run: "opencode"
    args: []
    install_cmd: ["go", "install", "github.com/opencode-ai/opencode@latest"]
    fallback_message: "OpenCode not found. Install with: go install github.com/opencode-ai/opencode@latest"
